<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tool ĐKHP HCMUS</title>
    <link rel="stylesheet" href="styles.css">
    <script src="scripts/main.js" defer></script>
    <script src="scripts/getMon.js" defer></script>
    <link rel="icon" href="assets/hcmus-logo.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Sans+Extra+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
        rel="stylesheet">
    <script src="https://kit.fontawesome.com/c0203358a2.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <div class="inner-container">
            <div class="logo">
                <img src="https://student.hcmus.edu.vn/_next/image?url=%2Fhcmus-logo.png&w=384&q=75" alt="HCMUS logo">
                <h1>Tool Đăng kí học phần</h1>
            </div>
            <div class="paste-code-container">
                <h2>Nhập đoạn text vừa copy từ portal</h2>
                <textarea name="content" id="web-content"></textarea>
                <div class="submit-btn">
                    <button id="submit-btn">Tạo bảng</button>
                </div>
            </div>
            <div class="show-result-wrapper">
                <div class="register-section-container">
                    <div class="show-result-container"></div>
                    <div class="submit-btn" style="display: none;">
                        <button id="confirm-regis">Xác nhận đăng ký</button>
                    </div>
                </div>
                <div id="code-shower-container" class="hidden">
                    <div id="confirmed-courses">
                        <h2>Các môn đã đăng ký</h2>
                        <div id="confirmed-courses-container">
                            <table class="content-table">
                                <thead>
                                    <th>Mã MH</th>
                                    <th>Tên Môn Học</th>
                                    <th>Tên Lớp</th>
                                    <th>Số TC</th>
                                    <th>Khoá</th>
                                    <th>Lịch Học</th>
                                    <th>Địa điểm</th>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="submit-btn">
                        <button id="generate-code-btn">Code đăng ký</button>
                        <button id="adjust-regis"
                            onclick="toggleHidden('register-section-container'); toggleHidden('code-shower-container');">Chỉnh
                            sửa đăng ký</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="popup" class="popup show">
            <div id="overlay-container" style="display: none;" class="overlay-container">
                <div id="DKBTTH-overlay" class="outer">
                    <div id="exit-btn-container" style="display: none;">
                        <button id="exit-btn">X</button>
                    </div>
                    <div id="DKBTTH-content">
                        <h1>Đăng kí bổ sung tín chỉ học phần</h1>
                        <div id="DKBTTH-form">
                            <table id="TKBTTH-table" class="content-table">
                                <thead class="table-heading">
                                    <th class="table-heading-element">Nhóm</th>
                                    <th class="table-heading-element">Sĩ số</th>
                                    <th class="table-heading-element">Đăng ký</th>
                                    <th class="table-heading-element">Địa điểm</th>
                                    <th class="table-heading-element">Lịch học</th>
                                    <th class="table-heading-element">Đăng ký</th>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div id="DK-btn" class="submit-btn">
                        <button id="DK-btn">Đăng ký</button>
                    </div>
                </div>
            </div>
            <div id="intro-container" style="display: block;" class="overlay-container">
                <div class="outer">
                    <h1>Giới thiệu & Hướng dẫn sử dụng</h1>
                    <p>Tool này giúp bạn tạo bảng đăng kí học phần từ portal của trường. Bạn chỉ cần copy đoạn text từ
                        portal và paste vào ô trên, sau đó nhấn nút "Tạo bảng".</p>
                    <p>Tool sẽ tự động tạo bảng cho phép bạn thực hiện đăng ký như thực hiện đăng ký thông thường trên
                        portal</p>
                    <p>Sau khi đăng ký xong, bạn có thể copy code đăng ký học phần và paste vào <strong>console</strong>
                        trong lúc ĐKHP để thực hiện việc đăng ký tự động</p>
                    <p>Bạn có thể sử dụng tool theo<a id="guild-videos" href="https://youtu.be/xIKMqPm9wTI" target="_blank"><i class="fa-brands fa-youtube" style="color: red"></i>video này</a> hoặc theo hướng dẫn bên dưới</p>
                    <p>Để sử dụng tool, bạn cần copy đoạn text từ portal như sau:</p>
                    <ul>
                        <li>Đăng nhập vào portal</li>
                        <li>Chọn mục <strong>"Đăng kí học phần > Danh sách lớp mở"</strong></li>
                        <li>Nhấn <strong>F12</strong> và paste đoạn code <button>này</button></li>
                        <li>Đợi nút Copy màu xanh hiện lên và ấn vào nó</li>
                        <li>Quay lại web và paste vào</li>
                    </ul>
                    <div class="footer">
                        <div class="submit-btn">
                            <button id="close-intro-btn" onclick="togglePopup('intro-container')">Đóng</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="toast-box"></div>
    </div>
</body>
<!--Toast notification-->
<script>
    const TOAST_TYPE = {
        SUCCESS: 'success',
        ERROR: 'error',
        INVALID: 'invalid'
    };
    let toastBox = document.getElementById('toast-box');

    let sucessMsg = '<i class="fa-solid fa-circle-check" style="color: green"></i> ';
    let errorMsg = '<i class="fa-regular fa-circle-xmark" style="color: red"></i> ';
    let invalidMsg = '<i class="fa-solid fa-circle-exclamation" style="color: orange"></i> ';
    function showToast(message, type) {
        let toast = document.createElement('div');
        toast.classList.add('toast');
        toastBox.appendChild(toast);

        let msg = message;
        
        if (type === TOAST_TYPE.ERROR) {
            toast.classList.add('error');
            msg = errorMsg + message;
        } else if (type === TOAST_TYPE.INVALID) {
            toast.classList.add('invalid');
            msg = invalidMsg + message;
        } else {
            toast.classList.add('success');
            msg = sucessMsg + message;
        }
        toast.innerHTML = msg;
        
        setTimeout(()=> {
            toast.remove();
        }, 5000);
    }
</script>

</html>